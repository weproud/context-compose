version: 1
kind: action
name: Task Done
description: Comprehensive task completion processing with validation, cleanup, and team notification
prompt: |
  Complete tasks with comprehensive validation and professional handover.

  This action finalizes task completion with thorough requirement validation,
  code quality assurance, comprehensive testing, and proper documentation.
  It ensures all acceptance criteria are met and prepares professional
  handover materials for team review and deployment.

  Use this when finishing features, bug fixes, or any development work that
  needs formal completion. The process includes quality validation, team
  notifications, and status updates for seamless project management.
enhanced-prompt: |-
  # ğŸ‰ Task Completion Workflow

  **Complete your task with professional standards and team communication.**

  ## ğŸ“‹ Step 1: Requirement Validation
  ```bash
  echo "=== Task Completion Checklist ==="
  echo "âœ… All acceptance criteria met"
  echo "âœ… Code follows project standards"
  echo "âœ… Tests written and passing"
  echo "âœ… Documentation updated"
  echo "âœ… No breaking changes introduced"
  echo ""
  ```

  ## ğŸ§¹ Step 2: Code Cleanup & Quality Check
  ```bash
  # Format code
  npm run format 2>/dev/null || echo "No formatter configured"

  # Lint code
  npm run lint 2>/dev/null || echo "No linter configured"

  # Type check
  npm run type-check 2>/dev/null || tsc --noEmit 2>/dev/null || echo "No TypeScript check"

  echo "âœ… Code quality checks completed"
  ```

  ## ğŸ§ª Step 3: Comprehensive Testing
  ```bash
  echo "Running comprehensive test suite..."

  # Unit tests
  npm test 2>/dev/null || echo "No unit tests configured"

  # Integration tests
  npm run test:integration 2>/dev/null || echo "No integration tests"

  # E2E tests (if applicable)
  npm run test:e2e 2>/dev/null || echo "No E2E tests"

  echo "âœ… All tests completed"
  ```

  ## ğŸ“ Step 4: Documentation Update
  ```bash
  # Update CHANGELOG if exists
  if [ -f "CHANGELOG.md" ]; then
    echo "ğŸ“ Remember to update CHANGELOG.md with your changes"
  fi

  # Check README updates needed
  if [ -f "README.md" ]; then
    echo "ğŸ“– Verify README.md reflects any new features"
  fi

  echo "âœ… Documentation review completed"
  ```

  ## ğŸ”„ Step 5: Final Git Operations
  ```bash
  # Stage all changes
  git add .

  # Create completion commit
  BRANCH_NAME=$(git branch --show-current)
  git commit -m "feat: complete task implementation

  - All requirements implemented
  - Tests passing
  - Documentation updated
  - Ready for review"

  # Push to remote
  git push origin "$BRANCH_NAME"

  echo "âœ… Code pushed to remote repository"
  ```

  ## ğŸ” Step 6: Create Pull Request
  ```bash
  # Get current branch and repo info
  CURRENT_BRANCH=$(git branch --show-current)
  REPO_URL=$(git remote get-url origin | sed 's/\.git$//')

  echo "ğŸ”— Create Pull Request:"
  echo "Branch: $CURRENT_BRANCH â†’ main"
  echo "Repository: $REPO_URL"
  echo ""
  echo "PR Template:"
  echo "## Summary"
  echo "Brief description of changes made"
  echo ""
  echo "## Changes"
  echo "- [ ] Feature implementation"
  echo "- [ ] Tests added/updated"
  echo "- [ ] Documentation updated"
  echo ""
  echo "## Testing"
  echo "- [ ] Unit tests pass"
  echo "- [ ] Integration tests pass"
  echo "- [ ] Manual testing completed"
  ```

  ## ğŸ“¢ Step 7: Team Notification
  ```bash
  # Prepare notification message
  TASK_SUMMARY="Task completed: $(basename $(pwd))"
  BRANCH_NAME=$(git branch --show-current)

  echo "ğŸ“± Send completion notification:"
  echo "Subject: âœ… $TASK_SUMMARY"
  echo "Message: Task implementation completed on branch '$BRANCH_NAME'"
  echo "- All requirements met"
  echo "- Tests passing"
  echo "- Ready for code review"
  echo ""
  echo "Use task-action send-message to notify team"
  ```

  ## ğŸ“Š Step 8: Status Update
  ```bash
  # Update task status
  echo "ğŸ“ˆ Updating task status to 'completed'"

  # If using task-action
  task-action task status done 2>/dev/null || echo "Manual status update needed"

  echo "âœ… Task marked as completed"
  ```

  ## ğŸ¯ Step 9: Handover Preparation
  ```bash
  echo "=== Task Handover Summary ==="
  echo "ğŸ“ Branch: $(git branch --show-current)"
  echo "ğŸ“ Last commit: $(git log -1 --pretty=format:'%h - %s')"
  echo "ğŸ§ª Test status: All passing"
  echo "ğŸ“– Documentation: Updated"
  echo "ğŸ” Ready for: Code review"
  echo ""
  echo "ğŸ‰ Task completion workflow finished!"
  ```

  ## âœ… Completion Checklist
  - [ ] All acceptance criteria validated
  - [ ] Code quality checks passed
  - [ ] Comprehensive testing completed
  - [ ] Documentation updated
  - [ ] Code committed and pushed
  - [ ] Pull request created
  - [ ] Team notified
  - [ ] Task status updated
  - [ ] Handover documentation prepared

  **ğŸš€ Your task is now ready for review and deployment!**
