version: 1
kind: action
name: Task Complete
description: Complete current task with testing and commit
prompt: |
  Complete the current task with proper testing, quality checks, and commit.

  This action runs final tests, performs code quality checks, commits changes,
  and prepares the work for review. It ensures the task meets basic quality
  standards before completion.

  Use this when finishing any development work to ensure proper completion
  and handover to the team.
enhanced-prompt: |-
  # 🎉 작업 완료

  ## 1단계: 코드 품질 확인
  ```bash
  echo "=== 작업 완료 시작 ==="

  # 린팅 실행
  echo "📝 코드 스타일 검사..."
  npm run lint 2>/dev/null || echo "⚠️ 린터 설정되지 않음"

  # TypeScript 검사
  if [ -f "tsconfig.json" ]; then
    echo "🔧 TypeScript 타입 검사..."
    npx tsc --noEmit 2>/dev/null || echo "⚠️ TypeScript 오류 확인 필요"
  fi

  echo "✅ 코드 품질 검사 완료"
  ```

  ## 2단계: 테스트 실행
  ```bash
  echo "🧪 테스트 실행..."

  # 테스트 실행
  npm test

  if [ $? -eq 0 ]; then
    echo "✅ 모든 테스트 통과"
  else
    echo "❌ 테스트 실패 - 수정 필요"
    exit 1
  fi
  ```

  ## 3단계: 변경사항 커밋
  ```bash
  # 현재 브랜치 정보
  CURRENT_BRANCH=$(git branch --show-current)
  echo "🌿 현재 브랜치: $CURRENT_BRANCH"

  # 변경사항 확인
  if [ -n "$(git status --porcelain)" ]; then
    echo "📋 변경된 파일들:"
    git status --short
    
    # 모든 변경사항 스테이징
    git add .
    
    # 커밋 메시지 작성
    echo "💬 커밋 메시지를 입력하세요:"
    read -p "> " COMMIT_MESSAGE
    
    git commit -m "$COMMIT_MESSAGE"
    echo "✅ 변경사항 커밋 완료"
  else
    echo "ℹ️ 커밋할 변경사항이 없습니다"
  fi
  ```

  ## 4단계: 원격 저장소 푸시
  ```bash
  # 원격으로 푸시
  echo "📤 원격 저장소에 푸시..."
  git push origin "$CURRENT_BRANCH"

  if [ $? -eq 0 ]; then
    echo "✅ 원격 푸시 완료"
  else
    echo "❌ 푸시 실패 - 충돌 해결 필요"
    exit 1
  fi
  ```

  ## 5단계: 완료 요약
  ```bash
  echo "🎉 작업 완료!"
  echo ""
  echo "📋 요약:"
  echo "  - 브랜치: $CURRENT_BRANCH"
  echo "  - 테스트: ✅ 통과"
  echo "  - 커밋: ✅ 완료"
  echo "  - 푸시: ✅ 완료"
  echo ""
  echo "🔄 다음 단계:"
  echo "  1. Pull Request 생성"
  echo "  2. 코드 리뷰 요청"
  echo "  3. 팀에 완료 알림"
  ```

  **🎯 결과:** 테스트되고 커밋된 완료된 작업
