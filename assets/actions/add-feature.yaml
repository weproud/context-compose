version: 1
kind: action
name: Add Feature
description: Add a new feature with proper branch setup and file structure
prompt: |
  Add a new feature following best practices with proper workflow and structure.

  This action creates a feature branch, sets up the necessary file structure,
  creates placeholder files, and prepares the development environment for
  implementing a new feature. It follows Git Flow conventions and ensures
  proper development practices.

  Use this when starting development of a new feature. The process includes
  branch creation, file scaffolding, and test preparation for efficient
  feature development workflow.
enhanced-prompt: |-
  # âœ¨ ìƒˆ ê¸°ëŠ¥ ì¶”ê°€

  ## 1ë‹¨ê³„: ê¸°ëŠ¥ ë¸Œëœì¹˜ ìƒì„±
  ```bash
  echo "=== ìƒˆ ê¸°ëŠ¥ ì¶”ê°€ ì‹œì‘ ==="

  # ê¸°ëŠ¥ ì´ë¦„ ì…ë ¥ ë°›ê¸°
  echo "ğŸ” ì¶”ê°€í•  ê¸°ëŠ¥ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”:"
  read -p "ê¸°ëŠ¥ ì´ë¦„: " FEATURE_NAME

  # ë¸Œëœì¹˜ ì´ë¦„ ìƒì„±
  BRANCH_NAME="feature/$(echo $FEATURE_NAME | tr ' ' '-' | tr '[:upper:]' '[:lower:]')"
  echo "ğŸŒ¿ ë¸Œëœì¹˜: $BRANCH_NAME"

  # ë©”ì¸ ë¸Œëœì¹˜ì—ì„œ ìµœì‹  ìƒíƒœë¡œ ì—…ë°ì´íŠ¸
  git checkout main
  git pull origin main

  # ê¸°ëŠ¥ ë¸Œëœì¹˜ ìƒì„±
  git checkout -b "$BRANCH_NAME"
  echo "âœ… ê¸°ëŠ¥ ë¸Œëœì¹˜ ìƒì„± ì™„ë£Œ"
  ```

  ## 2ë‹¨ê³„: íŒŒì¼ êµ¬ì¡° ìƒì„±
  ```bash
  # ê¸°ëŠ¥ë³„ ë””ë ‰í† ë¦¬ ìƒì„±
  FEATURE_DIR="src/features/$(echo $FEATURE_NAME | tr ' ' '-' | tr '[:upper:]' '[:lower:]')"
  mkdir -p "$FEATURE_DIR"

  # ê¸°ë³¸ íŒŒì¼ ìƒì„±
  cat > "$FEATURE_DIR/index.ts" << EOF
  // $FEATURE_NAME ê¸°ëŠ¥

  export class ${FEATURE_NAME//[^a-zA-Z0-9]/}Feature {
    constructor() {
      // TODO: ì´ˆê¸°í™” ë¡œì§
    }
    
    public async execute(): Promise<void> {
      // TODO: ê¸°ëŠ¥ êµ¬í˜„
      throw new Error('Not implemented');
    }
  }
  EOF

  echo "âœ… ê¸°ë³¸ íŒŒì¼ ìƒì„± ì™„ë£Œ: $FEATURE_DIR/index.ts"
  ```

  ## 3ë‹¨ê³„: í…ŒìŠ¤íŠ¸ íŒŒì¼ ìƒì„±
  ```bash
  # í…ŒìŠ¤íŠ¸ ë””ë ‰í† ë¦¬ ìƒì„±
  TEST_DIR="tests/features/$(echo $FEATURE_NAME | tr ' ' '-' | tr '[:upper:]' '[:lower:]')"
  mkdir -p "$TEST_DIR"

  # í…ŒìŠ¤íŠ¸ íŒŒì¼ ìƒì„±
  cat > "$TEST_DIR/index.test.ts" << EOF
  import { ${FEATURE_NAME//[^a-zA-Z0-9]/}Feature } from '../../../src/features/$(echo $FEATURE_NAME | tr ' ' '-' | tr '[:upper:]' '[:lower:]')';

  describe('${FEATURE_NAME//[^a-zA-Z0-9]/}Feature', () => {
    let feature: ${FEATURE_NAME//[^a-zA-Z0-9]/}Feature;
    
    beforeEach(() => {
      feature = new ${FEATURE_NAME//[^a-zA-Z0-9]/}Feature();
    });
    
    it('should be created', () => {
      expect(feature).toBeDefined();
    });
    
    it('should execute successfully', async () => {
      // TODO: í…ŒìŠ¤íŠ¸ êµ¬í˜„
      await expect(feature.execute()).rejects.toThrow('Not implemented');
    });
  });
  EOF

  echo "âœ… í…ŒìŠ¤íŠ¸ íŒŒì¼ ìƒì„± ì™„ë£Œ: $TEST_DIR/index.test.ts"
  ```

  ## 4ë‹¨ê³„: ê°œë°œ í™˜ê²½ ì¤€ë¹„
  ```bash
  # ë³€ê²½ì‚¬í•­ ì»¤ë°‹
  git add .
  git commit -m "feat: add $FEATURE_NAME feature scaffold

  - Create feature directory structure
  - Add basic implementation template
  - Add test template
  - Ready for development"

  # ì›ê²© ë¸Œëœì¹˜ ìƒì„±
  git push -u origin "$BRANCH_NAME"

  echo "ğŸ‰ ê¸°ëŠ¥ ì¶”ê°€ ì¤€ë¹„ ì™„ë£Œ!"
  echo "ğŸ“ ë‹¤ìŒ ë‹¨ê³„:"
  echo "  1. $FEATURE_DIR/index.ts íŒŒì¼ì—ì„œ ê¸°ëŠ¥ êµ¬í˜„"
  echo "  2. $TEST_DIR/index.test.ts íŒŒì¼ì—ì„œ í…ŒìŠ¤íŠ¸ ì‘ì„±"
  echo "  3. ê°œë°œ ì™„ë£Œ í›„ task-action complete ì‹¤í–‰"
  ```

  **ğŸ¯ ê²°ê³¼:** ìƒˆ ê¸°ëŠ¥ ê°œë°œì„ ìœ„í•œ ì™„ì „í•œ í™˜ê²½ êµ¬ì„±
